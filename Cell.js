"use strict";function composeExpressionWithParameters(e,t){return`${Object.keys(t).map((e=>`const ${e} = ${t[e]};`)).join("\n")};\n${e}`}function evaluate(expression){return eval(expression)}function evaluateExpressionWithParameters(expression,parameters){return eval(composeExpressionWithParameters(expression,parameters))}function computeGeometry(e,t){return e.geometry.map((e=>e.map((e=>{if("number"==typeof e)return e;if("string"!=typeof e)return;return evaluate(composeExpressionWithParameters(e,t))}))))}function composeSizedPoints(e,t){return e.map((e=>[t*e[0],t*e[1]]))}function computeCellScreenSize(e){return{width:Math.max(...e.map((e=>e[0]))),height:Math.max(...e.map((e=>e[1])))}}const default_cell_colors={fill:'"darkgrey"',selector:'"skyblue"'};function composeZoomedGeometry(e,t){const r=e.reduce(((e,t)=>[e[0]+t[0],e[1]+t[1]])).map((t=>t/e.length));return e.map((e=>[r[0]+t*(e[0]-r[0]),r[1]+t*(e[1]-r[1])]))}function Cell(e){var t,r,o;const{cell_config:s,resources:n,coordinates:l,size:i,figure_rotation_angle:a,figure:c,player:m,selected:u,handleSelectThisCell:p}=e,g=composeSizedPoints(computeGeometry(s,l),i),f=u?composeZoomedGeometry(g,.85):g,{width:h,height:d}=computeCellScreenSize(g),x=evaluateExpressionWithParameters(s.position.x,l)*i,y=evaluateExpressionWithParameters(s.position.y,l)*i,v=Object.assign({},default_cell_colors,s.colors||{});let E;return Object.keys(v).map((e=>v[e]=evaluateExpressionWithParameters(v[e],l))),null!=n&&null!==(t=n.images)&&void 0!==t&&t.figures&&null!=n&&null!==(r=n.images)&&void 0!==r&&r.figures[m]&&(E=null==n||null===(o=n.images)||void 0===o?void 0:o.figures[m][c]),React.createElement("div",{className:"cellWithFigure",style:{width:`${h}px`,height:`${d}px`,transform:`translate(${x}px, ${y}px)`}},React.createElement("svg",{className:"cell",style:{width:"100%",height:"100%"},xmlns:"http://www.w3.org/2000/svg",version:"1.1",onClick:p},u?React.createElement("polygon",{fill:v.selector,points:g.join(" ")}):null,React.createElement("polygon",{fill:v.fill,points:f.join(" ")})),c?React.createElement("img",{className:"figure",style:{transform:`rotate(${a}deg)`},src:E,alt:`${m} ${c}`,draggable:!1,onClick:p}):null)}