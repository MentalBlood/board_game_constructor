"use strict";function composeExpressionWithParameters(e,t){return`${Object.keys(t).map((e=>`const ${e} = ${t[e]};`)).join("\n")};\n${e}`}function evaluate(expression){return eval(expression)}function evaluateExpressionWithParameters(expression,parameters){return eval(composeExpressionWithParameters(expression,parameters))}function computeGeometry(e,t){return e.geometry.map((e=>e.map((e=>{if("number"==typeof e)return e;if("string"!=typeof e)return;return evaluate(composeExpressionWithParameters(e,t))}))))}function composeSizedPoints(e,t){return e.map((e=>[t*e[0],t*e[1]]))}function computeCellScreenSize(e){return{width:Math.max(...e.map((e=>e[0]))),height:Math.max(...e.map((e=>e[1])))}}const default_cell_colors={fill:'"darkgrey"',selector:'"skyblue"'};function composeZoomedGeometry(e,t){const r=e.reduce(((e,t)=>[e[0]+t[0],e[1]+t[1]])).map((t=>t/e.length));return e.map((e=>[r[0]+t*(e[0]-r[0]),r[1]+t*(e[1]-r[1])]))}function Cell(e){const{cell_config:t,resources:r,coordinates:o,size:s,figure_rotation_angle:n,figure:a,player:i,selected:l,handleSelectThisCell:c}=e,m=composeSizedPoints(computeGeometry(t,o),s),p=l?composeZoomedGeometry(m,.85):m,{width:u,height:g}=computeCellScreenSize(m),h=evaluateExpressionWithParameters(t.position.x,o)*s,f=evaluateExpressionWithParameters(t.position.y,o)*s,x=Object.assign({},default_cell_colors,t.colors||{});return Object.keys(x).map((e=>x[e]=evaluateExpressionWithParameters(x[e],o))),React.createElement("div",{className:"cellWithFigure",style:{width:`${u}px`,height:`${g}px`,transform:`translate(${h}px, ${f}px)`}},React.createElement("svg",{className:"cell",style:{width:"100%",height:"100%"},xmlns:"http://www.w3.org/2000/svg",version:"1.1",onClick:c},l?React.createElement("polygon",{fill:x.selector,points:m.join(" ")}):null,React.createElement("polygon",{fill:x.fill,points:p.join(" ")})),a?React.createElement("img",{className:"figure",style:{transform:`rotate(${n}deg)`},src:`${r.path}/img/figures/${i}/${a}.svg`,alt:`${i} ${a}`,draggable:!1,onClick:c}):null)}