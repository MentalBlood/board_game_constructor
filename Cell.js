"use strict";function composeExpressionWithParameters(e,t){return`${Object.keys(t).map((e=>`const ${e} = ${t[e]};`)).join("\n")};\n${e}`}function evaluate(expression){return eval(expression)}function evaluateExpressionWithParameters(expression,parameters){return eval(composeExpressionWithParameters(expression,parameters))}function computeGeometry(e,t){return e.geometry.map((e=>e.map((e=>{if("number"==typeof e)return e;if("string"!=typeof e)return;return evaluate(composeExpressionWithParameters(e,t))}))))}function composeSizedPoints(e,t){return e.map((e=>[t*e[0],t*e[1]]))}function computeCellScreenSize(e){return{width:Math.max(...e.map((e=>e[0]))),height:Math.max(...e.map((e=>e[1])))}}const default_cell_colors={fill:'"darkgrey"',selector:'"skyblue"',highlighter:'"lightgreen"'};function composeZoomedGeometry(e,t){const r=e.reduce(((e,t)=>[e[0]+t[0],e[1]+t[1]])).map((t=>t/e.length));return e.map((e=>[r[0]+t*(e[0]-r[0]),r[1]+t*(e[1]-r[1])]))}function Cell(e){var t,r,o;const{cell_config:i,resources:l,coordinates:n,size:s,figure_rotation_angle:a,figure:c,player:m,selected:u,highlighted:p,handleSelectThisCell:g}=e,h=composeSizedPoints(computeGeometry(i,n),s),f=u||p?composeZoomedGeometry(h,.85):h,{width:d,height:x}=computeCellScreenSize(h),y=evaluateExpressionWithParameters(i.position.x,n)*s,v=evaluateExpressionWithParameters(i.position.y,n)*s,E=Object.assign({},default_cell_colors,i.colors||{});let $;return Object.keys(E).map((e=>E[e]=evaluateExpressionWithParameters(E[e],n))),null!=l&&null!==(t=l.images)&&void 0!==t&&t.figures&&null!=l&&null!==(r=l.images)&&void 0!==r&&r.figures[m]&&($=null==l||null===(o=l.images)||void 0===o?void 0:o.figures[m][c]),React.createElement("div",{className:"cellWithFigure",style:{width:`${d}px`,height:`${x}px`,transform:`translate(${y}px, ${v}px)`}},React.createElement("svg",{className:"cell",style:{width:"100%",height:"100%"},xmlns:"http://www.w3.org/2000/svg",version:"1.1",onClick:g},u?React.createElement("polygon",{fill:E.selector,points:h.join(" ")}):p?React.createElement("polygon",{fill:E.highlighter,points:h.join(" ")}):null,React.createElement("polygon",{fill:E.fill,points:f.join(" ")})),c?React.createElement("img",{className:"figure",style:{transform:`rotate(${a}deg)`},src:$,alt:`${m} ${c}`,draggable:!1,onClick:g}):null)}